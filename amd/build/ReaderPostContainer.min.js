define(["jquery",M.cfg.wwwroot+"/mod/newsmod/amd/src/ReaderPost.js",M.cfg.wwwroot+"/mod/newsmod/lib/build/vue.min.js"],(function(s,t,i){return i.component("post-container",{props:["postlist","markedpost","courseid","showloadingicon","viewportsize"],data:function(){return{previouspost:-1}},components:{post:t},watch:{markedpost:function(){if(-1!=this.markedpost){var s=this.postlist[this.markedpost];s.isSelected=!0,s.unread=!1,i.set(this.postlist,this.markedpost,s),-1!=this.previouspost&&this.previouspost!=this.markedpost&&void 0!==this.postlist[this.previouspost]&&((s=this.postlist[this.previouspost]).isSelected=!1,i.set(this.postlist,this.previouspost,s)),this.previouspost=this.markedpost}}},methods:{ongetmsg:function(s,t){this.$emit("displaymsg",s);var e=this.postlist[t];e.isSelected=!0,e.unread=!1,i.set(this.postlist,t,e),-1!=this.previouspost&&this.previouspost!=t&&void 0!==this.postlist[this.previouspost]&&((e=this.postlist[this.previouspost]).isSelected=!1,i.set(this.postlist,this.previouspost,e)),this.previouspost=t,window.scroll({top:200,left:0,behavior:"smooth"})},onhidefamily:function(s){var t=[];this.traversefamily(s,t);for(var i=0;i<t.length;i++){let s=parseInt(t[i]);this.$refs[s][0].hideself()}},onshowfamily:function(s){var t=[];this.traversefamily(s,t);for(var i=0;i<t.length;i++){let s=parseInt(t[i]);this.$refs[s][0].showself()}},traversefamily:function(s,t){for(var i=0;i<s.length;i++)Array.isArray(s[i])?this.traversefamily(s[i],t):t.push(s[i])},setSelectedUP:function(s){this.$emit("setSelected",s)}},template:"<div class=\"post-container\">\n                                <div :class=\"{'hidden': showloadingicon, 'text-center': true, 'my-2': true}\" style=\"opacity:0.5;\">\n                                    <i class=\"fas fa-circle-o-notch fa-spin fa-3x\"/>\n                                </div>\n                                <post v-for='singlepost in postlist' \n                                    v-bind:content='singlepost' \n                                    v-bind:key = 'singlepost.messageid'\n                                    :viewportsize = 'viewportsize'\n                                    :ref='singlepost.messageid'\n                                    v-on:getmsg='ongetmsg'\n                                    v-on:hidefamily='onhidefamily'\n                                    v-on:showfamily='onshowfamily'\n                                    v-on:setSelected='setSelectedUP'\n                                    v-bind:courseid = 'courseid'>\n                                </post>\n                            </div>"})}));