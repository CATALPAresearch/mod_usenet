/**
 *
 *
 * @module     mod_usenet
 * @class      Post
 * @copyright  Niels Seidel <niels.seidel@fernuni-hagen.de>
 * @license    GNU GPLv3
 */
define([M.cfg.wwwroot+"/mod/usenet/lib/build/vue.min.js",M.cfg.wwwroot+"/mod/usenet/lib/build/axios.min.js"],(function(e,n){return e.component("post",{props:["content","courseid","log"],data:function(){return{isSelected:!1,hiddenChildren:!1,identiconstring:"data:image/svg+xml;base64,"+this.content.identicon,textindent:{"text-indent":this.content.margin+"px"}}},created(){this.textindent="text-indent: "+this.content.margin+"px"},methods:{toggleMarkedMessage:function(e){e.preventDefault(),this.content.marked=!this.content.marked,this.$emit("log",(this.content.marked,"marked"),{message_id:this.content.messagenumber,message_author:this.message.personal}),n.get([M.cfg.wwwroot+"/mod/usenet/php/statuschange.php?id="+this.courseid+"&msgnr="+this.content.messagenumber].join()).then()},displayMessage:function(e,n,t){console.log("displayMEssage",e,n),this.$emit("getmsg",e,n),this.$emit("log","message_list_click",{message_id:e,message_pos:n})},hideChildren:function(e){0==this.hiddenChildren?(this.hiddenChildren=!0,this.$emit("hideChildren",this.content.children)):(this.hiddenChildren=!1,this.$emit("showChildren",this.content.children)),this.$emit("setSelected",this.content.messagenumber),this.$emit("log",(this.hiddenChildren,"shown"),{message_id:this.content.messagenumber}),e.preventDefault()},hideself:function(){this.content.hidden=!0},showself:function(){this.content.hidden=!1}},template:'\n                <div class="post" :class="{hidden: content.hidden}">\n                    <div class="node px-0" :column="content.margin" :class="{\'font-weight-bold\': content.unread}">\n                        <div class="container-fluid px-0 pb-1 pb-md-0">\n                            <div class="row px-0 mx-0" :class="{\'bg-info\': content.isSelected}" >\n                                <div class="px-0 col-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">\n                                    <i class="fas fa-sm pt-2 px-sm-3 pr-xs-3 pl-xs-3 pl-md-2" \n                                        :class="{\'fa-chevron-down\': content.haschild, \'fa-chevron-right\': this.hiddenChildren}" \n                                        style="cursor:pointer"\n                                        v-on:click="hideChildren($event)" \n                                        title="Diskussion ein- oder ausklappen"\n                                        />\n                                </div>\n                                <div \n                                    class="px-0 col-11 col-sm-11 col-md-11 col-lg-11 col-xl-11" \n                                    style="display:inline-block;"\n                                    >\n                                    <div class="row poststyle mb-xs-2">\n                                        \n                                        <div \n                                            :style="textindent" \n                                            class="col-6 col-sm-7 col-md-3 col-lg-3 col-xl-3 \n                                            order-1 order-sm-1 \n                                            text-truncate px-0"\n                                            v-on:click="displayMessage(content.messagenumber, content.arraypos, $event)"\n                                            >\n                                            <img style="width:20px; height:20px;" :src="this.content.identicon" :title="this.content.personal"/>\n                                            {{content.personal}}\n                                        </div>\n                                    \n                                        <div \n                                            class="col-6 col-sm-6 col-md-11 col-lg-6 col-xl-6 \n                                            order-3 order-xs-3 order-md-2 \n                                            text-truncate px-0"\n                                            style="left:4px;"\n                                            v-on:click="displayMessage(content.messagenumber, content.arraypos, $event)"\n                                            >\n                                            {{content.subject}}\n                                        </div>\n\n                                        <div \n                                            class="col-6 col-sm-3 col-md-3 col-lg-3 col-xl-3 \n                                            order-2 order-md-3 \n                                            px-0"\n                                            data-date-format="DD.MM.YYYY">\n                                            <span v-on:click="displayMessage(content.messagenumber, content.arraypos, $event)" style="font-size:1em">{{content.calctime}}</span>\n                                            <i class="far fa-star poststyle d-xs-block" :class="{starmarked: content.marked, fas: content.marked }"\n                                        v-on:click="toggleMarkedMessage($event)" title="Favoriten markieren"/>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                '})}));