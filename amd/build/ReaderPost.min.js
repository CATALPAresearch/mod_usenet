define(["jquery",M.cfg.wwwroot+"/mod/newsmod/lib/build/vue.min.js",M.cfg.wwwroot+"/mod/newsmod/lib/build/axios.min.js"],(function(t,n,e){return n.component("post",{props:["content","courseid","viewportsize"],data:function(){return{isSelected:!1,hiddenfamily:!1,identiconstring:"data:image/svg+xml;base64,"+this.content.identicon,poststylechild:{cursor:"pointer"},borderstyle:{"border-left":"solid black 0px"},textindent:{"text-indent":this.content.margin+"px"},postpadding:"0px",paddingSVPval:"5px",paddingOVPval:"0px"}},created(){if("mobile"==this.viewportsize){this.postpadding=this.paddingSVPval,this.textindent="text-indent: 0px";let t=0;this.content.family&&(t=this.flatten(this.content.family).length),this.borderstyle="border-left: solid black "+t+"px"}else this.postpadding=this.paddingOVPval,this.textindent="text-indent: "+this.content.margin+"px",this.borderstyle="border-left: solid black 0px"},watch:{viewportsize:function(){if("mobile"==this.viewportsize){this.postpadding=this.paddingSVPval,this.textindent="text-indent: 0px";let t=0;this.content.family&&(t=this.flatten(this.content.family).length),this.borderstyle="border-left: solid black "+t+"px"}else this.postpadding=this.paddingOVPval,this.textindent="text-indent: "+this.content.margin+"px",this.borderstyle="border-left: solid black 0px"}},methods:{flatten:function(t){return"[object Array]"===Object.prototype.toString.call(t)?[].concat.apply([],t.map(this.flatten)):t},setcourseid:function(t){this.courseid=t},togglemarked:function(){e.get([M.cfg.wwwroot+"/mod/newsmod/php/statuschange.php?id="+this.courseid+"&msgnr="+this.content.messageid].join()).then(),this.content.marked?this.content.marked=!1:this.content.marked=!0},hidefamily:function(){0==this.hiddenfamily?(this.hiddenfamily=!0,this.$emit("hidefamily",this.content.family)):(this.hiddenfamily=!1,this.$emit("showfamily",this.content.family)),this.$emit("setSelected",this.content.arraypos)},hideself:function(){this.content.hidden=!0},showself:function(){this.content.hidden=!1}},computed:{poststylechildcnd:function(){if(this.content.haschild)return this.poststylechild}},template:'\n                <div class="post" :class="{hidden: content.hidden}" :style="{\'padding-bottom\': this.postpadding}">\n                    <div class="node px-0" :column="content.margin" :class="{\'font-weight-bold\': content.unread}">\n                        <div class ="container-fluid px-0">\n                            <div class="row px-0">\n                                \n                                <div class="px-0 col-1 col-xs-1 col-sm-1 col-md-1 col-lg-1 col-xl-1">\n                                    <i class="fas fa-sm pt-2 px-3" \n                                        :class="{\'fa-caret-down\': content.haschild, \'fa-caret-right\': this.hiddenfamily}" \n                                        :style="poststylechildcnd"\n                                        v-on:click="hidefamily" \n                                        title="Diskussion ein- oder ausklappen"\n                                        />\n                                </div>\n\n                                <div \n                                    class="px-0 col-11 col-xs-11 col-sm-11 col-md-11 col-lg-11 col-xl-11" \n                                    style="display:inline-block;"\n                                    v-bind:class="{\'bg-info\': content.isSelected}" \n                                    >\n                                    <div class="row poststyle mb-xs-2" v-on:click="$emit(\'getmsg\', content.messageid, content.arraypos)">\n                                        \n                                        <div class="col-3 order-1 order-sm-1 col-xs-8 col-sm-3 col-md-3 col-lg-3 col-xl-3 text-truncate px-0">\n                                            <img class="" style="width:20px; height:20px;" :src="this.content.identicon" :title="this.content.personal"/>\n                                            {{content.personal}}\n                                        </div>\n                                    \n                                        <div class="col-6 order-3 order-md-2 col-xs-11 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-truncate px-0" :style="textindent" style="margin-left:25px;">\n                                            {{content.subject}}\n                                        </div>\n\n                                        <div class="col-2 order-2 order-md-3 col-xs-4 col-sm-2 col-md-2 col-lg-2 col-xl-2 px-0" data-date-format="DD.MM.YYYY">\n                                            <span style="font-size:0.9em">{{content.calctime}}</span>\n                                            <i class="far fa-star poststyle d-none d-xs-block" :class="{starmarked: content.marked, fas: content.marked }"\n                                        v-on:click="togglemarked" title="Favoriten markieren"/>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                '})}));